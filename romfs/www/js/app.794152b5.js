(function(e){function t(t){for(var o,l,r=t[0],d=t[1],s=t[2],u=0,m=[];u<r.length;u++)l=r[u],i[l]&&m.push(i[l][0]),i[l]=0;for(o in d)Object.prototype.hasOwnProperty.call(d,o)&&(e[o]=d[o]);c&&c(t);while(m.length)m.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,r=1;r<n.length;r++){var d=n[r];0!==i[d]&&(o=!1)}o&&(a.splice(t--,1),e=l(l.s=n[0]))}return e}var o={},i={app:0},a=[];function l(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=o,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)l.d(n,o,function(t){return e[t]}.bind(null,o));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],d=r.push.bind(r);r.push=t,r=r.slice();for(var s=0;s<r.length;s++)t(r[s]);var c=d;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"06ae":function(e,t,n){},"0fc0":function(e,t,n){"use strict";var o=n("8229"),i=n.n(o);i.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var o=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-container"},[n("md-app",{attrs:{"md-waterfall":"","md-mode":"fixed"}},[n("md-app-toolbar",{staticClass:"md-primary toolbar"},[n("md-button",{staticClass:"md-icon-button",on:{click:function(t){e.showNavigation=!0}}},[n("md-icon",[e._v("menu")])],1),n("span",{staticClass:"md-title"},[e._v("Air-NX")])],1),n("md-app-drawer",{staticClass:"drawer",attrs:{"md-active":e.showNavigation},on:{"update:mdActive":function(t){e.showNavigation=t}}},[n("md-toolbar",{attrs:{"md-elevation":"0"}},[n("span",{staticClass:"md-title"},[e._v("Air-NX")])]),n("md-list",[n("md-list-item",[n("md-icon",[e._v("sd_card")]),n("router-link",{staticClass:"md-list-item-text",attrs:{to:"/files"}},[e._v("SD-Card")])],1)],1)],1),n("md-app-content",[n("div",{staticClass:"wrapper"},[n("router-view")],1)])],1)],1)},a=[],l={name:"App",data:function(){return{showNavigation:!1}}},r=l,d=(n("8dec"),n("2877")),s=Object(d["a"])(r,i,a,!1,null,"04b8d6c5",null);s.options.__file="App.vue";var c=s.exports,u=n("43f9"),m=n.n(u),f=(n("51de"),n("e094"),n("8c4f")),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"})},h=[],v={name:"home",components:{}},_=v,g=Object(d["a"])(_,p,h,!1,null,null,null);g.options.__file="Home.vue";var w=g.exports,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{on:{dragover:function(e){e.preventDefault()},drop:e.onFileDrop}},[n("md-toolbar",{attrs:{"md-elevation":1}},[n("div",{staticClass:"md-toolbar-section-start"},[n("md-button",{on:{click:function(t){e.back()}}},[n("md-icon",[e._v("arrow_back")]),e._v("Back\n            ")],1)],1),n("div",{staticClass:"md-toolbar-section-end"},[n("md-menu",{attrs:{"md-direction":"bottom-start"}},[n("md-button",{attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("more_vert")])],1),n("md-menu-content",[n("md-menu-item",{on:{click:function(t){e.makeFolder()}}},[n("span",[e._v("New folder")]),n("md-icon",[e._v("folder")])],1),n("md-menu-item",{on:{click:e.openUploadModal}},[n("span",[e._v("Upload file")]),n("md-icon",[e._v("cloud_upload")]),n("input",{staticStyle:{display:"none"},attrs:{id:"fileInput",multiple:"multiple",type:"file"},on:{change:e.onFileSelected}})],1)],1)],1)],1)]),n("md-subheader",[n("span",{staticClass:"md-title"},[e._v(e._s(e.currentDir))])]),e.isLoading?n("md-progress-spinner",{attrs:{"md-mode":"indeterminate"}}):e.files.length>0?n("div",[n("md-list",e._l(e.files,function(t){return n("md-list-item",{key:t.path,on:{click:function(n){e.fileClicked(t)}}},[n("md-icon",{staticClass:"md-primary"},[e._v("\n                    "+e._s(t.is_directory?"folder":"insert_drive_file")+"\n                ")]),n("div",{staticClass:"md-list-item-text"},[n("span",[e._v(e._s(t.name))]),n("span",[e._v(e._s(t.is_directory?"Folder":t.extension))])]),n("md-menu",{attrs:{"md-direction":"bottom-start"},on:{click:function(e){e.stopPropagation()}}},[n("md-button",{attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("more_vert")])],1),n("md-menu-content",[n("md-menu-item",{on:{click:function(n){e.deleteFile(t)}}},[n("span",[e._v("Delete")]),n("md-icon",[e._v("delete")])],1)],1)],1)],1)}))],1):n("div",[n("md-empty-state",{attrs:{"md-icon":"folder_open","md-label":"This folder is empty"}})],1),n("md-dialog-prompt",{attrs:{"md-active":e.showNewFolderModal,"md-title":"New Folder?","md-input-maxlength":"256","md-input-placeholder":"Name of the folder","md-confirm-text":"Create folder"},on:{"update:mdActive":function(t){e.showNewFolderModal=t},"md-confirm":function(t){e.createFolder()}},model:{value:e.newFolderName,callback:function(t){e.newFolderName=t},expression:"newFolderName"}}),n("md-dialog-confirm",{attrs:{"md-active":e.showDeleteModal,"md-title":"Delete?","md-content":"Do you really want to delete the file?","md-confirm-text":"Delete","md-cancel-text":"Cancel"},on:{"update:mdActive":function(t){e.showDeleteModal=t},"md-cancel":e.onDeleteCancel,"md-confirm":e.onDeleteConfirm}}),n("md-dialog",{attrs:{"md-active":e.filesToUpload.length>0}},[n("md-dialog-title",[e._v("Upload")]),n("div",{staticClass:"upload-modal"},[e.filesToUpload.length>0?n("md-content",[n("h1",{staticClass:"md-title"},[e._v(e._s(e.filesToUpload[0].name))]),n("p",{staticClass:"md-subheading"},[e._v(e._s(e.uploadProgress)+"%")]),n("md-progress-bar",{staticClass:"md-accent",attrs:{"md-mode":"determinate","md-value":e.uploadProgress}}),n("p",[n("strong",[e._v(e._s(e.filesToUpload.length))]),e._v(" files left.")])],1):e._e()],1)],1)],1)},D=[],y=(n("7f7f"),n("aef6"),n("bc3a")),C=n.n(y),F={name:"files",components:{},data:function(){return{currentDir:"/",isLoading:!1,files:[],showNewFolderModal:!1,newFolderName:"",showDeleteModal:!1,fileToDelete:null,showUploadModal:!1,filesToUpload:[],uploadProgress:0}},computed:{parentDir:function(){return this.currentDir.substr(0,this.currentDir.lastIndexOf("/"))}},methods:{load:function(e){var t=this;e||(e="/"),this.isLoading=!0,C.a.get("api/file?dir=".concat(e)).then(function(n){t.files=n.data,t.currentDir=e,t.isLoading=!1})},fileClicked:function(e){e.is_directory?this.load(e.path):window.open("/download"+e.path,"_blank")},back:function(){this.load(this.parentDir)},makeFolder:function(){this.newFolderName="",this.showNewFolderModal=!0},createFolder:function(){var e=this,t=this.currentDir;t.endsWith("/")||(t+="/"),C.a.get("api/directory?path=".concat(t).concat(this.newFolderName)).then(function(t){e.files.push(t.data)})},deleteFile:function(e){this.fileToDelete=e,this.showDeleteModal=!0},onDeleteCancel:function(){this.fileToDelete=null,this.showDeleteModal=!1},onDeleteConfirm:function(){var e=this;C.a.delete("api/file?path=".concat(this.fileToDelete.path)).then(function(t){e.files=e.files.filter(function(e){return e.path!=t.data.path})})},upload:function(){var e=this;e.uploadProgress=0;var t={onUploadProgress:function(t){var n=Math.round(100*t.loaded/t.total);e.uploadProgress=n}},n=new FormData;n.append("file",this.filesToUpload[0]);var o=this.currentDir;o.endsWith("/")||(o+="/"),o+=this.filesToUpload[0].name,C.a.put("/api/upload?path=".concat(o),n,t).then(function(t){e.files.push(t.data),e.filesToUpload.shift(),e.filesToUpload.length>0&&e.upload()}).catch(function(e){return console.log(e)})},onFileDrop:function(e){e.stopPropagation(),e.preventDefault();var t=e.dataTransfer.files;console.log(t);for(var n=0;n<t.length;n++)this.filesToUpload.push(t[n]);this.upload()},onFileSelected:function(e,t){for(var n=e.target.files,o=0;o<n.length;o++)this.filesToUpload.push(n[o]);this.upload()},openUploadModal:function(){document.getElementById("fileInput").click()}},mounted:function(){this.load(this.currentDir)}},k=F,T=(n("0fc0"),Object(d["a"])(k,b,D,!1,null,"137c0727",null));T.options.__file="Files.vue";var x=T.exports;o["default"].use(f["a"]);var N=new f["a"]({routes:[{path:"/",name:"home",component:w},{path:"/files",name:"about",component:x}]});o["default"].config.productionTip=!1,o["default"].use(m.a),new o["default"]({router:N,render:function(e){return e(c)}}).$mount("#app")},8229:function(e,t,n){},"8dec":function(e,t,n){"use strict";var o=n("06ae"),i=n.n(o);i.a}});
//# sourceMappingURL=app.794152b5.js.map